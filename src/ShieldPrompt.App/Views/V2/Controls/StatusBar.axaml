<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="clr-namespace:ShieldPrompt.App.ViewModels.V2"
             x:DataType="vm:StatusBarViewModel"
             x:Class="ShieldPrompt.App.Views.V2.Controls.StatusBar">

    <Border Background="#181825" Padding="8,4">
        <Grid ColumnDefinitions="Auto,*,Auto,Auto,Auto,Auto,Auto">

            <!-- Status Message with Icon -->
            <StackPanel Grid.Column="0" Orientation="Horizontal" Spacing="8">
                <TextBlock Text="{Binding StatusIcon}"
                           VerticalAlignment="Center"
                           FontSize="12"/>
                <TextBlock Text="{Binding StatusMessage}"
                           VerticalAlignment="Center"
                           Foreground="{Binding StatusColor}"
                           FontSize="12"/>
            </StackPanel>

            <!-- Progress Bar (when loading) -->
            <ProgressBar Grid.Column="1"
                         Value="{Binding ProgressPercentage}"
                         Maximum="100"
                         Height="4"
                         Margin="16,0"
                         IsVisible="{Binding ShowProgress}"
                         VerticalAlignment="Center"
                         Foreground="#89b4fa"/>

            <!-- File Count -->
            <StackPanel Grid.Column="2" Orientation="Horizontal" Spacing="4" Margin="0,0,16,0">
                <TextBlock Text="ðŸ“"
                           VerticalAlignment="Center"
                           FontSize="12"/>
                <TextBlock Text="{Binding FileCountDisplay}"
                           Foreground="#cdd6f4"
                           VerticalAlignment="Center"
                           FontSize="12"/>
            </StackPanel>

            <!-- Git Branch (when available) -->
            <TextBlock Grid.Column="3"
                       Text="{Binding BranchDisplay}"
                       Foreground="#89b4fa"
                       IsVisible="{Binding ShowGitBranch}"
                       Margin="0,0,16,0"
                       VerticalAlignment="Center"
                       FontSize="12"/>

            <!-- Token Usage with Progress Bar -->
            <Grid Grid.Column="4" ColumnDefinitions="Auto,Auto" Margin="0,0,16,0">
                <TextBlock Grid.Column="0"
                           Text="{Binding TokenDisplay}"
                           Foreground="#cdd6f4"
                           VerticalAlignment="Center"
                           Margin="0,0,8,0"
                           FontSize="12"/>
                <ProgressBar Grid.Column="1"
                             Value="{Binding TokenPercentage}"
                             Maximum="100"
                             Width="80"
                             Height="6"
                             Foreground="{Binding TokenProgressColor}"
                             VerticalAlignment="Center"/>
            </Grid>

            <!-- Current Model -->
            <Border Grid.Column="5"
                    Background="#313244"
                    CornerRadius="4"
                    Padding="8,2"
                    Margin="0,0,16,0">
                <TextBlock Text="{Binding CurrentModel}"
                           Foreground="#a6e3a1"
                           FontSize="11"
                           VerticalAlignment="Center"/>
            </Border>

            <!-- Session Timer -->
            <TextBlock Grid.Column="6"
                       Text="{Binding SessionDisplay}"
                       Foreground="#6c7086"
                       FontSize="11"
                       VerticalAlignment="Center"/>
        </Grid>
    </Border>
</UserControl>
